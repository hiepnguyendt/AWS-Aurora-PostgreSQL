<!DOCTYPE html>
<html lang="vi" class="js csstransforms3d">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.123.1">
    <meta name="description" content="">
<meta name="author" content="journeyoftheaverageguy@gmail.com">

    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>Benchmarking với Cluster Cache management :: AWS System Manager</title>

    
    <link href="/css/nucleus.css?1711431242" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1711431242" rel="stylesheet">
    <link href="/css/hybrid.css?1711431242" rel="stylesheet">
    <link href="/css/featherlight.min.css?1711431242" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1711431242" rel="stylesheet">
    <link href="/css/auto-complete.css?1711431242" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1711431242" rel="stylesheet">
    <link href="/css/theme.css?1711431242" rel="stylesheet">
    <link href="/css/hugo-theme.css?1711431242" rel="stylesheet">
    
    <link href="/css/theme-workshop.css?1711431242" rel="stylesheet">
    
    

    <script src="/js/jquery-3.3.1.min.js?1711431242"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/vi/5-clustercachemanagement/5-2-benchmarkingwithclustercachemanagement/">
    <nav id="sidebar" class="showVisitedLinks">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="/">

<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 60 30" width="30%"><defs><style>.cls-1{fill:#fff;}.cls-2{fill:#f90;fill-rule:evenodd;}</style></defs><title>AWS-Logo_White-Color</title><path class="cls-1" d="M14.09,10.85a4.7,4.7,0,0,0,.19,1.48,7.73,7.73,0,0,0,.54,1.19.77.77,0,0,1,.12.38.64.64,0,0,1-.32.49l-1,.7a.83.83,0,0,1-.44.15.69.69,0,0,1-.49-.23,3.8,3.8,0,0,1-.6-.77q-.25-.42-.51-1a6.14,6.14,0,0,1-4.89,2.3,4.54,4.54,0,0,1-3.32-1.19,4.27,4.27,0,0,1-1.22-3.2A4.28,4.28,0,0,1,3.61,7.75,6.06,6.06,0,0,1,7.69,6.46a12.47,12.47,0,0,1,1.76.13q.92.13,1.91.36V5.73a3.65,3.65,0,0,0-.79-2.66A3.81,3.81,0,0,0,7.86,2.3a7.71,7.71,0,0,0-1.79.22,12.78,12.78,0,0,0-1.79.57,4.55,4.55,0,0,1-.58.22l-.26,0q-.35,0-.35-.52V2a1.09,1.09,0,0,1,.12-.58,1.2,1.2,0,0,1,.47-.35A10.88,10.88,0,0,1,5.77.32,10.19,10.19,0,0,1,8.36,0a6,6,0,0,1,4.35,1.35,5.49,5.49,0,0,1,1.38,4.09ZM7.34,13.38a5.36,5.36,0,0,0,1.72-.31A3.63,3.63,0,0,0,10.63,12,2.62,2.62,0,0,0,11.19,11a5.63,5.63,0,0,0,.16-1.44v-.7a14.35,14.35,0,0,0-1.53-.28,12.37,12.37,0,0,0-1.56-.1,3.84,3.84,0,0,0-2.47.67A2.34,2.34,0,0,0,5,11a2.35,2.35,0,0,0,.61,1.76A2.4,2.4,0,0,0,7.34,13.38Zm13.35,1.8a1,1,0,0,1-.64-.16,1.3,1.3,0,0,1-.35-.65L15.81,1.51a3,3,0,0,1-.15-.67.36.36,0,0,1,.41-.41H17.7a1,1,0,0,1,.65.16,1.4,1.4,0,0,1,.33.65l2.79,11,2.59-11A1.17,1.17,0,0,1,24.39.6a1.1,1.1,0,0,1,.67-.16H26.4a1.1,1.1,0,0,1,.67.16,1.17,1.17,0,0,1,.32.65L30,12.39,32.88,1.25A1.39,1.39,0,0,1,33.22.6a1,1,0,0,1,.65-.16h1.54a.36.36,0,0,1,.41.41,1.36,1.36,0,0,1,0,.26,3.64,3.64,0,0,1-.12.41l-4,12.86a1.3,1.3,0,0,1-.35.65,1,1,0,0,1-.64.16H29.25a1,1,0,0,1-.67-.17,1.26,1.26,0,0,1-.32-.67L25.67,3.64,23.11,14.34a1.26,1.26,0,0,1-.32.67,1,1,0,0,1-.67.17Zm21.36.44a11.28,11.28,0,0,1-2.56-.29,7.44,7.44,0,0,1-1.92-.67,1,1,0,0,1-.61-.93v-.84q0-.52.38-.52a.9.9,0,0,1,.31.06l.42.17a8.77,8.77,0,0,0,1.83.58,9.78,9.78,0,0,0,2,.2,4.48,4.48,0,0,0,2.43-.55,1.76,1.76,0,0,0,.86-1.57,1.61,1.61,0,0,0-.45-1.16A4.29,4.29,0,0,0,43,9.22l-2.41-.76A5.15,5.15,0,0,1,38,6.78a3.94,3.94,0,0,1-.83-2.41,3.7,3.7,0,0,1,.45-1.85,4.47,4.47,0,0,1,1.19-1.37A5.27,5.27,0,0,1,40.51.29,7.4,7.4,0,0,1,42.6,0a8.87,8.87,0,0,1,1.12.07q.57.07,1.08.19t.95.26a4.27,4.27,0,0,1,.7.29,1.59,1.59,0,0,1,.49.41.94.94,0,0,1,.15.55v.79q0,.52-.38.52a1.76,1.76,0,0,1-.64-.2,7.74,7.74,0,0,0-3.2-.64,4.37,4.37,0,0,0-2.21.47,1.6,1.6,0,0,0-.79,1.48,1.58,1.58,0,0,0,.49,1.18,4.94,4.94,0,0,0,1.83.92L44.55,7a5.08,5.08,0,0,1,2.57,1.6A3.76,3.76,0,0,1,47.9,11a4.21,4.21,0,0,1-.44,1.93,4.4,4.4,0,0,1-1.21,1.47,5.43,5.43,0,0,1-1.85.93A8.25,8.25,0,0,1,42.05,15.62Z"></path><path class="cls-2" d="M45.19,23.81C39.72,27.85,31.78,30,25,30A36.64,36.64,0,0,1,.22,20.57c-.51-.46-.06-1.09.56-.74A49.78,49.78,0,0,0,25.53,26.4,49.23,49.23,0,0,0,44.4,22.53C45.32,22.14,46.1,23.14,45.19,23.81Z"></path><path class="cls-2" d="M47.47,21.21c-.7-.9-4.63-.42-6.39-.21-.53.06-.62-.4-.14-.74,3.13-2.2,8.27-1.57,8.86-.83s-.16,5.89-3.09,8.35c-.45.38-.88.18-.68-.32C46.69,25.8,48.17,22.11,47.47,21.21Z"></path></svg>

</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1711431242"></script>
<script type="text/javascript" src="/js/auto-complete.js?1711431242"></script>
<script type="text/javascript">
    
        var baseurl = "\/\/localhost:1313\/\/vi";
    
</script>
<script type="text/javascript" src="/js/search.js?1711431242"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/vi/1-introduce/" title="Giới thiệu" class="dd-item 
        
        
        
        ">
      <a href="/vi/1-introduce/">
           <b> 1. </b> Giới thiệu
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/2-preparation/" title="Các bước chuẩn bị" class="dd-item 
        
        
        
        ">
      <a href="/vi/2-preparation/">
           <b> 2. </b> Các bước chuẩn bị
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/vi/2-preparation/2-1-createvpc/" title="Tạo VPC" class="dd-item 
        
        
        
        ">
      <a href="/vi/2-preparation/2-1-createvpc/">
           <b> 2.1. </b> Tạo VPC
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/2-preparation/2-2-createsg/" title="Tạo Security Group " class="dd-item 
        
        
        
        ">
      <a href="/vi/2-preparation/2-2-createsg/">
           <b> 2.2. </b> Tạo Security Group 
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/2-preparation/2-3-createec2/" title="Tạo EC2 instance" class="dd-item 
        
        
        
        ">
      <a href="/vi/2-preparation/2-3-createec2/">
           <b> 2.3. </b> Tạo EC2 instance
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/2-preparation/2-4-createpgsg/" title="Tạo Subnet Group và Parameter Group" class="dd-item 
        
        
        
        ">
      <a href="/vi/2-preparation/2-4-createpgsg/">
           <b> 2.4. </b> Tạo Subnet Group và Parameter Group
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/2-preparation/2-5-createaupg/" title="Create Aurora PostgreSQL Database" class="dd-item 
        
        
        
        ">
      <a href="/vi/2-preparation/2-5-createaupg/">
           <b> 2.5. </b> Create Aurora PostgreSQL Database
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/2-preparation/2-6-configurecloud9andinitializedatabase/" title="Tạo, cấu hình Cloud9 và khởi tạo cơ sở dữ liệu" class="dd-item 
        
        
        
        ">
      <a href="/vi/2-preparation/2-6-configurecloud9andinitializedatabase/">
           <b> 2.6.</b> Tạo, cấu hình Cloud9 và khởi tạo cơ sở dữ liệu
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/5-clustercachemanagement/" title="Start with PostgreSQL" class="dd-item 
        parent
        
        
        ">
      <a href="/vi/5-clustercachemanagement/">
           <b> 2. </b> Start with PostgreSQL
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/vi/5-clustercachemanagement/5-1-setupclustercachemanagement/" title="Thiết lập cluster cache management" class="dd-item 
        
        
        
        ">
      <a href="/vi/5-clustercachemanagement/5-1-setupclustercachemanagement/">
           <b> 5.1. </b> Thiết lập cluster cache management
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/5-clustercachemanagement/5-2-benchmarkingwithclustercachemanagement/" title="Benchmarking với Cluster Cache management" class="dd-item 
        
        active
        
        ">
      <a href="/vi/5-clustercachemanagement/5-2-benchmarkingwithclustercachemanagement/">
           <b> 5.2. </b> Benchmarking với Cluster Cache management
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/3-fastcloning/" title="Fast Cloning" class="dd-item 
        
        
        
        ">
      <a href="/vi/3-fastcloning/">
           <b> 3. </b> Fast Cloning
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/6-databaseactivitystreaming/" title="Import data into PostgreSQl" class="dd-item 
        
        
        
        ">
      <a href="/vi/6-databaseactivitystreaming/">
           <b> 4. </b> Import data into PostgreSQl
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/vi/6-databaseactivitystreaming/6-1-setupkmsfordatabaseactivitystreamsinaction/" title="Configure the database client" class="dd-item 
        
        
        
        ">
      <a href="/vi/6-databaseactivitystreaming/6-1-setupkmsfordatabaseactivitystreamsinaction/">
           <b> 4.1. </b> Configure the database client
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/6-databaseactivitystreaming/6-2-dbactivitystreamsinaction/" title="Verify DB instance" class="dd-item 
        
        
        
        ">
      <a href="/vi/6-databaseactivitystreaming/6-2-dbactivitystreamsinaction/">
           <b> 2. </b> Verify DB instance
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/4-queryplanmanagement/" title="Query Plan Management" class="dd-item 
        
        
        
        ">
      <a href="/vi/4-queryplanmanagement/">
           <b> 4. </b> Query Plan Management
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/9-testfaulttolerance/" title="Querying data" class="dd-item 
        
        
        
        ">
      <a href="/vi/9-testfaulttolerance/">
           <b> 5. </b> Querying data
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            




 
  
    
    <li data-nav-id="/vi/9-testfaulttolerance/9-1-setupfailovereventnotifications/" title="Set up failover event notifications" class="dd-item 
        
        
        
        ">
      <a href="/vi/9-testfaulttolerance/9-1-setupfailovereventnotifications/">
           <b> 9.1 </b> Set up failover event notifications
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/9-testfaulttolerance/9-2-testamanualdbclusterfailover/" title="Test a manual DB cluster failover" class="dd-item 
        
        
        
        ">
      <a href="/vi/9-testfaulttolerance/9-2-testamanualdbclusterfailover/">
           <b> 9.2. </b> Test a manual DB cluster failover
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
            
            




 
  
    
    <li data-nav-id="/vi/9-testfaulttolerance/9-3-testingfaultinjectionqueries/" title="Testing fault injection queries" class="dd-item 
        
        
        
        ">
      <a href="/vi/9-testfaulttolerance/9-3-testingfaultinjectionqueries/">
           <b> 9.3 </b> Testing fault injection queries
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/11-cleanup/" title="Clean up resources" class="dd-item 
        
        
        
        ">
      <a href="/vi/11-cleanup/">
           <b> 6. </b> Clean up resources
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/7-rdsperformanceinsights/" title="RDS Performance Insights" class="dd-item 
        
        
        
        ">
      <a href="/vi/7-rdsperformanceinsights/">
           <b> 7. </b> RDS Performance Insights
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/8-createdatasetandautoscale/" title="Create dataset and Auto Scale" class="dd-item 
        
        
        
        ">
      <a href="/vi/8-createdatasetandautoscale/">
           <b> 8. </b> Create dataset and Auto Scale
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/vi/10-comparationrdspgandaupg/" title="Comparison RDS PostgreSQL and Aurora PostgreSQL" class="dd-item 
        
        
        
        ">
      <a href="/vi/10-comparationrdspgandaupg/">
           <b> 10. </b> Comparison RDS PostgreSQL and Aurora PostgreSQL
          
            <i class="fas fa-check read-icon"></i>
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://www.facebook.com/groups/awsstudygroupfcj/"><i class='fab fa-facebook'></i> AWS Study Group</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
        <li>
          <a class="padding">
            <i class="fas fa-language fa-fw"></i>
          <div class="select-style">
            <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
                    
                    
                      <option id="en" value="//localhost:1313/5-clustercachemanagement/5-2-benchmarkingwithclustercachemanagement/">English</option>
                    
                  
              
                  
              
          
              
              
                  
              
                  
                    
                    
                      <option id="vi" value="//localhost:1313/vi/5-clustercachemanagement/5-2-benchmarkingwithclustercachemanagement/" selected>Tiếng Việt</option>
                    
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </a>
        </li>
      
      
      
        <li><a class="padding" href="#" data-clear-history-toggle=""><i class="fas fa-history fa-fw"></i> Clear History</a></li>
      
      </ul>
    </section>
    
    <section id="footer">
      <left>
    
     <b> Workshop</b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7920860&style=0038&nbdigits=9&type=page&initCount=0" title="Migrate" Alt="web counter"   border="0" /></a>  <br>
     <b> <a href="https://cloudjourney.awsstudygroup.com/">Cloud Journey</a></b> <br>
    <img src="https://hitwebcounter.com/counter/counter.php?page=7830807&style=0038&nbdigits=9&type=page&initCount=0" title="Total CLoud Journey" Alt="web counter"   border="0"   />
     
</left>
<left>
    <br>
    <br>
        <b> Last Updated </b> <br>
        <i><font color=orange>30-01-2022</font></i>
    </left>
    <left>
        <br>
        <br>
            <b> Team </b> <br>
           
            <i> <a href="https://www.linkedin.com/in/sutrinh/"  style="color:orange">Sử Trịnh  </a> <br>
                <a href="https://www.linkedin.com/in/jotaguy"  style="color:orange">Gia Hưng </a> <br>
                <a href="https://www.linkedin.com/in/hiepnguyendt"  style="color:orange">Thanh Hiệp </a>
               
        </i>
        </left>

<script async defer src="https://buttons.github.io/buttons.js"></script>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/vi/'>AWS RDS PostgreSQL</a> > <a href='/vi/5-clustercachemanagement/'>Start with PostgreSQL</a> > Benchmarking với Cluster Cache management
          
        
          
        
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li></li>
        <li><a href="#benchmarking-với-ccm-được-kích-hoạt">Benchmarking với CCM được kích hoạt</a></li>
        <li><a href="#benchmarking-với-ccm-disabled">Benchmarking với CCM disabled</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Benchmarking với Cluster Cache management
            </h1>
          

        



	<h4 id="benchmarking-với-cluster-cache-management">Benchmarking với Cluster Cache management</h4>
<p>Để xác minh các lợi ích của tính năng của Cluster Cache Management trên cụm Aurora, chúng ta sẽ thực hiện các bước sau. Chúng ta sẽ khám phá các bước này chi tiết hơn trong các phần tương ứng dưới đây.</p>
<ul>
<li>Với CCM được kích hoạt, chúng ta sẽ chạy bài đo hiệu năng pgbench trên writer node.</li>
<li>Chúng ta sẽ kiểm tra các trang được lưu trữ trong bộ nhớ cache trên cả writer node và reader node để xác minh rằng chúng được đồng bộ.</li>
<li>Sau đó, chúng ta sẽ thực hiện Failover trên cụm Aurora.</li>
<li>Chúng ta sẽ chạy bài đo hiệu năng pgbench trên writer node mới sau sự cố và xác minh rằng các số liệu TPS (Transaction Per Second) giữa writer node cũ và mới là tương tự.</li>
<li>Sau đó, chúng ta sẽ tắt CCM.</li>
<li>Chúng ta sẽ xóa bộ nhớ cache đệm trên cả writer node và reader node bằng cách dừng và khởi động lại cụm.</li>
<li>Với CCM bị tắt, chúng ta sẽ chạy bài đo hiệu năng trên writer node bằng cách sử dụng pgbench lại</li>
<li>Chúng ta sẽ kiểm tra các trang được lưu trữ trong bộ nhớ cache trên cả writer node và reader node để xác minh rằng chúng không được đồng bộ.</li>
<li>Tiếp theo, chúng ta sẽ thực hiện Failover trên cụm Aurora một lần nữa.</li>
<li>Chúng ta sẽ chạy bài đo hiệu năng pgbench trên writer node mới sau sự cố và xác minh rằng các số liệu TPS giữa writer node cũ và mới biến đổi đáng kể.</li>
</ul>
<ol>
<li>Tải dữ liệu lớn để thực hiện bài đo hiệu năng (benchmarking):

<div class="notices note" ><p>Để tái tạo bài đo hiệu năng được sử dụng trong lab, chúng ta cần thêm dữ liệu mẫu vào bài đo hiệu năng. Lệnh dưới đây sử dụng yếu tố tỷ lệ (scale factor) là 10000. Bước tùy chọn này có thể mất khoảng 15-20 phút để thêm dữ liệu vào cơ sở dữ liệu, vì vậy hãy đảm bảo bạn có đủ thời gian hoàn thành lab trước khi chạy lệnh dưới đây.</p>
</div>
</li>
</ol>
<ul>
<li>
<p>Chạy lệnh sau trong terminal Cloud9 của bạn để kết nối với writer node của cụm Aurora bằng pgbench và thêm dữ liệu mẫu với scale factor = 10000</p>
<pre tabindex="0"><code>pgbench -i --fillfactor=100 --scale=10000
</code></pre></li>
<li>
<p>Kiểm tra kích thước cơ sở dữ liệu aupglab bằng PSQL.</p>
<pre tabindex="0"><code>psql
SELECT pg_size_pretty( pg_database_size(&#39;aupglab&#39;));
</code></pre></li>
</ul>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Nếu bạn đã sử dụng scale factor 100) trong pgbench, bạn sẽ thấy kết quả của chúng ta tương tự như sau:
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <p><img alt="benchmark" src="/images/5/5.2/1.png"></p>

    </div>
</div>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Nếu bạn chạy pgbench với hệ số tỷ lệ 10000 ở bước trước, bạn sẽ thấy kết quả đầu ra tương tự như sau:
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <p><img alt="benchmark" src="/images/5/5.2/2.png"></p>

    </div>
</div>
<h3 id="benchmarking-với-ccm-được-kích-hoạt">Benchmarking với CCM được kích hoạt</h3>
<ol>
<li>Chạy bài đo hiệu năng trên nút writer bằng pgbench (trước khi thực hiện failover):</li>
</ol>
<ul>
<li>
<p>Bắt đầu bài đo hiệu năng pgbench trong 600 giây trên writer node của Aurora PostgreSQL với CCM (Continuous Cloud Monitoring) được kích hoạt, hãy sử dụng lệnh sau trong terminal Cloud9 của bạn:</p>
<pre tabindex="0"><code>pgbench --progress-timestamp -M prepared -n -T 600 -P 5 -c 50 -j 50 -b tpcb-like@1 -b select-only@20 &gt; ccm_enable_before_failover.out 
</code></pre></li>
</ul>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Giải thích câu lệnh
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <p><strong>pgbench</strong>: This is a benchmarking tool for PostgreSQL databases.<br>
<strong>&ndash;progress-timestamp</strong>: Prints a timestamp with each progress report.<br>
<strong>-M prepared</strong>: Uses prepared transactions for benchmarking.<br>
<strong>-n</strong>: Specifies a no-vacuum test, which avoids vacuuming during the benchmark.<br>
<strong>-T 600</strong>: Runs the benchmark for 600 seconds (10 minutes).<br>
<strong>-P 5</strong>: Populates the database with 5 client sessions before starting the benchmark.<br>
<strong>-c 50</strong>: Runs the benchmark with 50 concurrent client connections.<br>
<strong>-j 50</strong>: Specifies 50 threads for multi-threaded operation.<br>
<strong>-b tpcb-like@1</strong>: Uses the TPC-B-like transaction mix with a weight of 1.<br>
<strong>-b select-only@20</strong>: Uses a select-only transaction mix with a weight of 20.<br>
<strong>ccm_enable_before_failover.out</strong>: Redirects the output to a file named &ldquo;ccm_enable_before_failover.out&rdquo;.</p>

    </div>
</div>

<div class="notices info" ><p>Chúng ta đang sử dụng tùy chọn tpcb-like của pgbench để thực hiện bài đo hiệu năng và sử dụng ký hiệu &ldquo;@&rdquo; để chỉ định xác suất chạy công việc chỉ đọc (read-only) và công việc đọc-ghi (read-write). Trong ví dụ dưới đây, chúng ta đang chạy công việc tpcb-like với 20 lần công việc chỉ đọc và 1 lần công việc đọc-ghi trong 600 giây.</p>
</div>

<ul>
<li>
<p>Sau 600 giây khi bài đo hiệu năng hoàn tất, bạn có thể xem kết quả đầu ra của pgbench trên màn hình hoặc tham khảo tệp đầu ra &ldquo;ccm_enable_before_failover.out&rdquo;. Kết quả tóm tắt sẽ có dạng như sau. Xin lưu ý rằng đầu ra của bạn có thể khác một chút.</p>
<pre tabindex="0"><code>cat ccm_enable_before_failover.out
</code></pre><p><img alt="benchmark" src="/images/5/5.2/3.png"></p>
</li>
</ul>
<h4 id="kiểm-tra-số-trang-được-lưu-trữ-trong-bộ-nhớ-cache-trên-cả-writer-node-và-các-reader-node-trong-cụm-aurora-postgresql">Kiểm tra số trang được lưu trữ trong bộ nhớ cache trên cả writer node và các reader node trong cụm Aurora PostgreSQL</h4>
<ul>
<li><strong>Pg_buffercache</strong> extension cung cấp một phương tiện để xem nội dung của bộ đệm (buffer cache). Chúng ta sẽ dùng pg_buffercache để xem nội dung của bộ đệm (với CCM được kích hoạt và CCM bị vô hiệu hóa) để minh họa tác động của CCM (Cluster Cache Management). Chúng ta sẽ so sánh nội dung của bộ đệm trên Writer node với Reader node.</li>
<li>Khi CCM được kích hoạt, nội dung của bộ đệm trên writer node và reader node sẽ tương tự nhau, vì writer node sẽ định kỳ gửi bộ đệm của các bộ đệm được sử dụng thường xuyên (mặc định là số lần sử dụng&gt;3) cho reader node để được đọc từ bộ nhớ lưu trữ.</li>
</ul>
<ol>
<li>Kết nối với Writer node bằng psql sử dụng cluster endpoint</li>
</ol>
<ul>
<li>
<p>Tạo extension pg_buffercache trên cơ sở dữ liệu.</p>
<pre tabindex="0"><code>psql
CREATE EXTENSION pg_buffercache;
\dx pg_buffercache
</code></pre><p><img alt="benchmark" src="/images/5/5.2/4.png"></p>
</li>
<li>
<p>Xác nhận rằng bạn đã kết nối với Writer node và truy vấn xem pg_buffercache để xem số trang được lưu trữ trong bộ nhớ cache cho các bảng khác nhau</p>
<pre tabindex="0"><code>show transaction_read_only;
</code></pre><p><img alt="benchmark" src="/images/5/5.2/5.png"></p>
<pre tabindex="0"><code>SELECT c.relname, count(*) AS buffers
FROM pg_buffercache b 
INNER JOIN pg_class c
ON b.relfilenode = pg_relation_filenode(c.oid) 
AND b.reldatabase IN (0, (SELECT oid FROM pg_database WHERE datname = current_database()))
GROUP BY c.relname
ORDER BY 2 DESC
LIMIT 10;
</code></pre><p><img alt="benchmark" src="/images/5/5.2/6.png"></p>
</li>
</ul>

<div class="expand">
    <div class="expand-label" style="cursor: pointer;" onclick="$h = $(this);$h.next('div').slideToggle(100,function () {$h.children('i').attr('class',function () {return $h.next('div').is(':visible') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';});});">
        <i style="font-size:x-small;" class="fas fa-chevron-right"></i>
        <span>
        
    	
    	Giải thích scripts
    	
    	</span>
    </div>
    <div class="expand-content" style="display: none;">
        <table>
<thead>
<tr>
<th>Command</th>
<th>Purposes</th>
</tr>
</thead>
<tbody>
<tr>
<td>SELECT c.relname, count(*) AS buffers</td>
<td>Queries for the relation name (relname) and the number of buffers used (count(*)), labeling the count as &ldquo;buffers&rdquo;.</td>
</tr>
<tr>
<td>FROM pg_buffercache b</td>
<td>Accesses data from the pg_buffercache system view, which holds details about buffered pages.</td>
</tr>
<tr>
<td>INNER JOIN pg_class c</td>
<td>Combines data from pg_buffercache with information about relations from the pg_class system catalog.</td>
</tr>
<tr>
<td>ON b.relfilenode = pg_relation_filenode(c.oid)</td>
<td>Links entries based on filenodes, associating buffers with their respective relations.</td>
</tr>
<tr>
<td>AND b.reldatabase IN (0, (SELECT oid FROM pg_database WHERE datname = current_database()))</td>
<td>Includes buffers for both shared system catalogs (database 0) and the current database.</td>
</tr>
<tr>
<td>GROUP BY c.relname</td>
<td>Aggregates results based on relation names.</td>
</tr>
<tr>
<td>ORDER BY 2 DESC</td>
<td>Sorts in descending order based on the number of buffers (count(*) in position 2)</td>
</tr>
<tr>
<td>LIMIT 10;</td>
<td>Restricts output to the top 10 relations.</td>
</tr>
</tbody>
</table>

    </div>
</div>
<h4 id="kết-nối-tới-read-replica">Kết nối tới Read replica</h4>
<ol>
<li>
<p>Truy cập giao diện <a href="https://console.aws.amazon.com/rds/home?#database:">Amazon RDS console</a> .</p>
</li>
<li>
<p>Trong ngăn điều hướng, chọn Databases  và nhấp vào tên của cụm Aurora mà bạn đã tạo.</p>
</li>
<li>
<p>Bên dưới <strong>Connectivity and Security</strong>, copy <strong>Endpoint of type Reader</strong>.</p>
</li>
<li>
<p>Thay thế <!-- raw HTML omitted --> bên dưới bằng Aurora reader endpoint mà bạn đã sao chép ở trên và sử dụng dòng lệnh psql để kiểm tra xem extension pg_buffercache đã được cài đặt chưa.</p>
</li>
</ol>
<pre tabindex="0"><code>psql -h &lt;Aurora Reader EndPoint&gt;
\dx pg_buffercache
</code></pre><p><img alt="benchmark" src="/images/5/5.2/7.png"></p>
<ul>
<li>
<p>Xác minh xem bạn có được kết nối với Reader node hay không và truy vấn pg_buffercache để xem số trang được lưu trong bộ nhớ đệm cho các bảng khác nhau.</p>
<pre tabindex="0"><code>show transaction_read_only;
</code></pre><p><img alt="benchmark" src="/images/5/5.2/8.png"></p>
<pre tabindex="0"><code>SELECT c.relname, count(*) AS buffers
  FROM pg_buffercache b INNER JOIN pg_class c
  ON b.relfilenode = pg_relation_filenode(c.oid) AND
  b.reldatabase IN (0, (SELECT oid FROM pg_database
  WHERE datname = current_database()))
  GROUP BY c.relname
  ORDER BY 2 DESC
  LIMIT 10;
</code></pre><p><img alt="benchmark" src="/images/5/5.2/9.png"></p>
</li>
</ul>
<p><em>Lưu ý rằng, sau khi tắt CCM, số lượng trang đệm trên readeer node sẽ ít hơn nhiều so với writer node đối với các bảng được truy cập thường xuyên.</em></p>
<h4 id="failover-aurora-cluster">Failover Aurora cluster</h4>
<ul>
<li>
<p>Bây giờ, chúng tôi sẽ bắt đầu quá trình chuyển đổi dự phòng của cụm Aurora và sau khi quá trình chuyển đổi dự phòng hoàn tất, chúng tôi sẽ đo hiệu năng trên writer node mới. Để bắt đầu chuyển đổi dự phòng, hãy chuyển đến RDS console, chọn writer instance của cụm Aurora và nhấp vào <strong>Failover</strong> trong menu <strong>Actions</strong>.
<img alt="benchmark" src="/images/5/5.2/10.png"></p>
</li>
<li>
<p>Click <strong>Failover</strong> để xác nhận.
<img alt="benchmark" src="/images/5/5.2/11.png"></p>
</li>
<li>
<p>Sau khi quá trình chuyển giao hoàn tất (sau khoảng ~30 giây), hãy xác minh rằng reader node trước đó đã trở thành writer node mới.
<img alt="benchmark" src="/images/5/5.2/12.png">
<img alt="benchmark" src="/images/5/5.2/13.png"></p>
</li>
</ul>
<h4 id="để-chạy-bài-thử-nghiệm-sử-dụng-công-cụ-pgbench-trên-writer-node-mới-sau-quá-trình-failover">Để chạy bài thử nghiệm sử dụng công cụ pgbench trên writer node mới (sau quá trình failover)</h4>
<ul>
<li>Bây giờ chúng ta sẽ chạy bài thử nghiệm pgbench tương tự như trước và so sánh trước và sau khi failover.</li>
</ul>
<pre tabindex="0"><code>pgbench --progress-timestamp -M prepared -n -T 600 -P 5  -c 50 -j 50 -b tpcb-like@1 -b select-only@20 &gt; ccm_enable_after_failover.out
</code></pre><ul>
<li>Sau 600 giây khi bài thử nghiệm hoàn tất, bạn có thể xác minh kết quả đầu ra của pgbench trên màn hình hoặc tham khảo tệp đầu ra &ldquo;ccm_enable_after_failover.out&rdquo;. Kết quả tóm tắt sẽ có dạng như sau. Lưu ý rằng kết quả của bạn có thể khác nhau một chút</li>
</ul>
<pre tabindex="0"><code>cat ccm_enable_after_failover.out
</code></pre><p><img alt="benchmark" src="/images/5/5.2/14.png"></p>
<p><em>Nhận thấy rằng sau khi tắt CCM, số liệu tps trên writer node mới sau quá trình failover ít hơn so với writer node cũ trước khi failover.</em></p>
<h3 id="benchmarking-với-ccm-disabled">Benchmarking với CCM disabled</h3>
<p>Bây giờ, chúng ta sẽ tắt CCM và thực hiện các bài thử nghiệm tương tự như trước với CCM đã được kích hoạt.</p>
<h4 id="tắt-ccm">Tắt CCM</h4>
<p>Để tắt CCM trên cụm Aurora PostgreSQL, bạn cần chỉnh sửa nhóm tham số của cụm để đặt giá trị của tham số apg_ccm_enabled thành 0.</p>
<ol>
<li>
<p>Truy cập giao diện Amazon RDS console và chọn <a href="https://console.aws.amazon.com/rds/home?#parameter-groups:id=">Parameters groups</a> .</p>
</li>
<li>
<p>Trong danh sách, hãy chọn nhóm tham số cho cụm cơ sở dữ liệu Aurora PostgreSQL của bạn.
<img alt="benchmark" src="/images/5/5.2/14.png"></p>
</li>
<li>
<p>Hãy nhấp vào nhóm tham số của cụm cơ sở dữ liệu đã được chọn ở trên, sau đó click vào <strong>Edit Parameters</strong>.
<img alt="benchmark" src="/images/5/5.2/15.png"></p>
</li>
<li>
<p>Đặt giá trị <code>apg_ccm_enabled</code> thành 0 và nhấp vào <strong>Save changes</strong>
<img alt="benchmark" src="/images/5/5.2/16.png"></p>
</li>
<li>
<p>Để xác minh rằng Cluster Cache Management đã được tắt bằng cách truy vấn hàm aurora_ccm_status(), hãy thực hiện các bước sau:</p>
</li>
</ol>
<pre tabindex="0"><code>psql
\x
select * from aurora_ccm_status();
</code></pre><p><img alt="benchmark" src="/images/5/5.2/17.png"></p>
<h4 id="xóa-bộ-đệm-buffer-cache-của-cả-writer-node-và-reader-node-trên-cụm-aurora-postgresql">Xóa bộ đệm (buffer cache) của cả writer node và reader node trên cụm Aurora PostgreSQL</h4>
<p>Vì việc thử nghiệm trước đó với CCM đã làm tăng bộ đệm (buffer cache) của các reader instance và writer instance trên cụm Aurora, chúng ta cần dừng và khởi động lại cụm Aurora để làm trống bộ đệm trước khi chạy bài đo hiệu năng tiếp theo. Bạn cũng có thể khởi động lại cả reader instance và writer instance, nhưng điều này không đảm bảo rằng writer instance và reader instance đọc sẽ khởi động với bộ đệm trống.</p>
<h5 id="stop-cluster">Stop cluster</h5>
<ol>
<li>
<p>Xác minh rằng trạng thái cụm được hiển thị là “Available”, sau đó nhấp vào menu <strong>Actions</strong> và chọn <strong>Stop temporarily</strong>.
<img alt="benchmark" src="/images/5/5.2/18.png"></p>
</li>
<li>
<p>Xác nhận hành động bằng cách nhấp vào cơ sở dữ liệu <strong>Stop temporarily</strong>.
<img alt="benchmark" src="/images/5/5.2/19.png"></p>
</li>
</ol>
<p><em>Sẽ mất vài phút và trạng thái cụm sẽ thay đổi từ Stopping thành Stopped.</em>
<img alt="benchmark" src="/images/5/5.2/20.png"></p>
<h5 id="start-cluster">Start cluster</h5>
<ol>
<li>Khi trạng thái cụm thay đổi thành <strong>&ldquo;Stopped&rdquo;</strong> (Dừng), hãy nhấp vào menu <strong>Actions</strong> một lần nữa và chọn <strong>Start</strong>.
<img alt="benchmark" src="/images/5/5.2/21.png"></li>
</ol>
<p><em>Quá trình khởi động cụm sẽ mất vài phút và trạng thái của cụm sẽ chuyển từ &ldquo;Starting&rdquo; thành &ldquo;Available&rdquo;.</em></p>
<h4 id="chạy-bài-đo-hiệu-năng-trên-writer-node-bằng-cách-sử-dụng-công-cụ-pgbench-trước-khi-thực-hiện-failover">Chạy bài đo hiệu năng trên writer node bằng cách sử dụng công cụ pgbench (trước khi thực hiện failover)</h4>
<ol>
<li>Hãy chạy bài đo hiệu năng bằng cách sử dụng pgbench trên writer node của cụm Aurora như đã thực hiện trước đó.</li>
</ol>
<pre tabindex="0"><code>pgbench --progress-timestamp -M prepared -n -T 600 -P 5 -c 50 -j 50 -b tpcb-like@1 -b select-only@20 &gt; ccm_disable_before_failover.out
</code></pre><ol start="2">
<li>Sau 600 giây khi bài đo hiệu năng hoàn thành, bạn có thể xác minh kết quả đầu ra của pgbench trên màn hình hoặc tham khảo tệp đầu ra &ldquo;ccm_disable_before_failover.out&rdquo;. Đầu ra tóm tắt sẽ có dạng như sau. Lưu ý rằng đầu ra của bạn có thể khác một chút.</li>
</ol>
<pre tabindex="0"><code>cat ccm_disable_before_failover.out
</code></pre><p><img alt="benchmark" src="/images/5/5.2/22.png"></p>
<h4 id="kiểm-tra-số-trang-được-lưu-trong-bộ-đệm-trên-cả-writer-và-reader-nodes">kiểm tra số trang được lưu trong bộ đệm trên cả writer và reader nodes</h4>
<ol>
<li>Kết nối tới writer node bằng cách sử dụng cluster endpoint.</li>
</ol>
<pre tabindex="0"><code>psql
\dx pg_buffercache
</code></pre><p><img alt="benchmark" src="/images/5/5.2/23.png"></p>
<ol start="2">
<li>Để xác minh rằng bạn đã kết nối thành công đến writer node và truy vấn bảng <strong>pg_buffercache</strong> để xem số trang được lưu trong bộ đệm cho các bảng khác nhau,</li>
</ol>
<pre tabindex="0"><code>show transaction_read_only;
</code></pre><p><img alt="benchmark" src="/images/5/5.2/24.png"></p>
<pre tabindex="0"><code>SELECT c.relname, count(*) AS buffers
 FROM pg_buffercache b INNER JOIN pg_class c
 ON b.relfilenode = pg_relation_filenode(c.oid) AND
 b.reldatabase IN (0, (SELECT oid FROM pg_database
 WHERE datname = current_database()))
 GROUP BY c.relname
 ORDER BY 2 DESC
 LIMIT 10;
</code></pre><p><img alt="benchmark" src="/images/5/5.2/25.png"></p>
<h4 id="kết-nối-đến-read-replica">Kết nối đến read replica</h4>
<ol>
<li>Để kết nối tới reader instance bằng cách sử dụng Reader Endpoint của Cụm Aurora PostgreSQL. Thay thế <!-- raw HTML omitted --> bên dưới với Aurora Reader EndPoint của bạn.</li>
</ol>
<pre tabindex="0"><code>psql -h  &lt;Aurora Reader EndPoint&gt;
\dx pg_buffercache
</code></pre><p><img alt="benchmark" src="/images/5/5.2/26.png"></p>
<ol start="2">
<li>Xác minh rằng bạn đã kết nối với Reader node và truy vấn <strong>pg_buffercache</strong> để xem số lượng trang được lưu trong bộ nhớ đệm cho các bảng khác nhau.</li>
</ol>
<pre tabindex="0"><code>show transaction_read_only;
</code></pre><p><img alt="benchmark" src="/images/5/5.2/27.png"></p>
<pre tabindex="0"><code>SELECT c.relname, count(*) AS buffers
 FROM pg_buffercache b INNER JOIN pg_class c
 ON b.relfilenode = pg_relation_filenode(c.oid) AND
 b.reldatabase IN (0, (SELECT oid FROM pg_database
 WHERE datname = current_database()))
 GROUP BY c.relname
 ORDER BY 2 DESC
 LIMIT 10;
</code></pre><p><img alt="benchmark" src="/images/5/5.2/28.png"></p>
<p><em>Lưu ý rằng, sau khi tắt CCM, số lượng trang đệm trên reader node sẽ ít hơn nhiều so với writer node đối với các bảng được truy cập thường xuyên.</em></p>
<h4 id="failover-aurora-cluster-1">Failover Aurora cluster</h4>
<ol>
<li>
<p>Bây giờ, chúng tôi sẽ bắt đầu quá trình chuyển đổi dự phòng của cụm Aurora và sau khi quá trình chuyển đổi dự phòng hoàn tất, chúng tôi sẽ đo hiệu năng trên writer node mới.
<img alt="benchmark" src="/images/5/5.2/29.png"></p>
</li>
<li>
<p>Click vào <strong>Failover</strong>.</p>
</li>
</ol>
<p><em>Sau khi quá trình chuyển đổi dự phòng hoàn tất (sau khoảng ~30 giây), hãy xác minh rằng reader node trước đó sẽ trở thành writer node mới.</em>
<img alt="benchmark" src="/images/5/5.2/30.png"></p>
<h4 id="chạy-benchmark-bằng-công-cụ-pgbench-trên-writer-node-mới-sau-khi-thực-hiện-failover">Chạy benchmark bằng công cụ pgbench trên writer node mới (sau khi thực hiện failover)</h4>
<ol>
<li>Bây giờ, chúng ta sẽ chạy benchmark giống như trước đây và so sánh các chỉ số của pgbench trước và sau khi thực hiện failover.</li>
</ol>
<pre tabindex="0"><code>pgbench --progress-timestamp -M prepared -n -T 600 -P 5 -c 50 -j 50 -b tpcb-like@1 -b select-only@20 &gt; ccm_disable_after_failover.out
</code></pre><p>Sau 600 giây khi benchmark hoàn thành, bạn có thể xác minh kết quả đầu ra của pgbench trên màn hình hoặc tham khảo tệp đầu ra &ldquo;ccm_disable_after_failover.out&rdquo;. Đầu ra tóm tắt sẽ có dạng như sau. Lưu ý rằng đầu ra của bạn có thể khác một chút.</p>
<pre tabindex="0"><code>cat ccm_disable_after_failover.out
</code></pre><p><img alt="benchmark" src="/images/5/5.2/31.png"></p>
<p><em>Lưu ý rằng sau khi tắt CCM, số liệu tps trên writer node mới sau failover thấp hơn so với writer node cũ trước khi xảy ra failover.</em></p>





<footer class=" footline" >
	
</footer>

        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/vi/5-clustercachemanagement/5-1-setupclustercachemanagement/" title="Thiết lập cluster cache management"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/vi/3-fastcloning/" title="Fast Cloning" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1711431242"></script>
    <script src="/js/perfect-scrollbar.min.js?1711431242"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1711431242"></script>
    <script src="/js/jquery.sticky.js?1711431242"></script>
    <script src="/js/featherlight.min.js?1711431242"></script>
    <script src="/js/highlight.pack.js?1711431242"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1711431242"></script>
    <script src="/js/learn.js?1711431242"></script>
    <script src="/js/hugo-learn.js?1711431242"></script>

    <link href="/mermaid/mermaid.css?1711431242" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1711431242"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-158079754-2', 'auto');
  ga('send', 'pageview');

</script>
  </body>
</html>
